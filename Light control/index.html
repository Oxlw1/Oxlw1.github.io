<!doctype html>
<!--
Created using JS Bin
http://bin.webduino.io

Copyright (c) 2021 by anonymous (http://bin.webduino.io/ceneg/2/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Webduino Blockly Demo 01</title>
  <script src="https://bit.webduino.io/blockly/components/jquery/dist/jquery.min.js"></script>
  <script src="https://bit.webduino.io/blockly/dist/lib/webduino-all.min.js"></script>
  <script src="https://bit.webduino.io/blockly/dist/MessageTransport.min.js"></script>
  <script src="https://bit.webduino.io/blockly/dist/webduino-blockly.min.js"></script>
  <script src="https://bit.webduino.io/blockly/dist/lib/firebase.min.js"></script>
  <script src="https://bit.webduino.io/blockly/dist/lib/runtime.min.js"></script>
  <script src="https://buberhu.github.io/webduino_LINE_V3/main.js"></script>
  <script src="https://bit.webduino.io/blockly/components/webduino-bit-module-led-matrix/BitLedMatrix-blockly.js"></script>
  <script src="https://bit.webduino.io/blockly/components/webduino-bit-module-led-matrix/BitLedMatrix.js"></script>
<style id="jsbin-css">
#demo-area-01-show { font-size: 60px; pointer-events: auto!important; }
</style>
</head>

<body>
  <div><span id="demo-area-01-show">尚無動作</span></div>
<script id="jsbin-javascript">
var linebot;
var matrix;

function _E9_96_8B_E5_A7_8B() {
  firebase1ca6d.on('value',function(s){
    var msg1ca6d=false;
    if(flag1ca6d){
      flag1ca6d=false;
      return;
    }
    else {
      s.forEach(function(e){
        if(e.val().userid===linebot.userId && e.val().message!==''){
          linebot.onVal = e.val().message;
          msg1ca6d=true;}
      });
      if(!msg1ca6d) return;
    }
    if (linebot.onVal == '關燈') {
      line_bot($.extend({},linebot,{message:'已經關燈'}));
      matrix.setColor('#000000');
      document.getElementById("demo-area-01-show").innerHTML = '已經關燈';
    }
    if (linebot.onVal == '開燈') {
      line_bot($.extend({},linebot,{message:'已經開燈'}));
      matrix.setColor('#ff0000');
      document.getElementById("demo-area-01-show").innerHTML = '已經開燈';
    }
  });
}


var firebase1ca6d;
var flag1ca6d=true;
linebot = {token:'6Y9aBo5n6+wF13BTkdUX9HE46Pqjhx9Y7SBxm4ZowOpvZ+oPkuJNe6RCPzQFEd8yFNl7fMrQ7kwjcT6nOUvFcZFdoCYu8SYXafSvtQrboVlMVreef6lCllUkRxo7pTIeav/kzuhGENvwmZebIprT2AdB04t89/1O/w1cDnyilFU=',userId:'Ue72d7061f3c83ee3fcddde75e29c10ab',onVal:''};
firebase1ca6d = new Firebase('https://webduino-linebot-1ca6d.firebaseio.com/');

boardReady({board: 'Bit', device: 'bite300e5', transport: 'mqtt'}, function (board) {
  board.samplingInterval = 250;
  matrix = getMatrix(board, 4, 25);
  _E9_96_8B_E5_A7_8B();
});

</script>
</body>